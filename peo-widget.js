let IPcountryCode="",formValidated=!0;const form=document.getElementById("request-demo-api-form"),emailElement=document.getElementById("email"),submitBtn=document.getElementById("request_demo_submit-btn");async function checkEmailValidity(e){try{let t=await fetch("https://forms.hsforms.com/emailcheck/v1/json-ext?portalId=8552073&includeFreemailSuggestions=false",{method:"POST",body:e}),o=await t.json(),n=document.getElementById("email-error");formValidated=!o.emailFree,n.style.display=formValidated?"none":"block",formValidated||(n.innerText="Please enter your company/business email address.")}catch(a){console.error("Error checking email:",a),formValidated=!1}}document.querySelectorAll('input[type="tel"]').forEach(e=>{e.addEventListener("input",function(){e.value=e.value.replace(/\D/g,"")})}),localStorage.getItem("resEmail")&&emailElement&&(emailElement.value=localStorage.getItem("resEmail")),emailElement&&emailElement.addEventListener("focusout",e=>{checkEmailValidity(e.target.value)});const setDefaultOption=(e,t)=>{if(e){let o=new Option(t,"",!0,!0);o.disabled=!0,e.options[0]=o}};setDefaultOption(document.getElementById("number_of_remote_hires"),"Number of hires"),setDefaultOption(document.getElementById("how_can_we_help_you_new-input"),"How can we help you?"),setDefaultOption(document.getElementById("company_size"),"Company size");let countries=[],countryCodeSelect=document.getElementById("phone-code-dropdown");const setCountryCodeOptions=e=>{setDefaultOption(countryCodeSelect,"Select Country Code"),e.forEach(e=>{let t=`${e.label} (${e.dial_code})`;countryCodeSelect.add(new Option(t,e.dial_code))}),countryCodeSelect.value="+1";let t=document.querySelector("#request-demo-api-form .country-loading");t&&(t.style.display="none")},fetchCountryList=async()=>{try{let e=await fetch("https://storage.googleapis.com/skuad-public-assets/country-list.json"),t=await e.json();countries=t.countryList,countryCodeSelect&&setCountryCodeOptions(countries)}catch(o){console.error("Error fetching country list:",o)}},fetchIpInfo=async()=>{try{let e=await fetch("https://api.geoapify.com/v1/ipinfo?&apiKey=c23115da6cf642e59b96f32b9d512a4c"),t=await e.json();t?.country&&(IPcountryCode=t.country.iso_code,countryCodeSelect.value="+"+t.country.phone_code)}catch(o){console.error("Error fetching IP info:",o)}};fetchCountryList(),fetchIpInfo();const _submitHubspotForm=async(e,t,o,n)=>{submitBtn.value="Please wait...",submitBtn.disabled=!0,delete e["phone-code"];let a={submittedAt:new Date().getTime(),fields:Object.keys(e).map((t,o)=>({objectTypeId:"0-1",name:t,value:e[t]})),context:{hutk:getCookie("hubspotutk"),pageUri:window.location.href,pageName:document.title}};try{let i=await fetch(`https://api.hsforms.com/submissions/v3/integration/submit/${o}/${n}`,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(a)}),r=await i.json();submitBtn.value="Please wait...",submitBtn.disabled=!0,r.inlineMessage?(submitBtn.disabled=!1,localStorage.setItem("skuadSignupFormData",JSON.stringify({...e,countryCode:t}))):handleErrorMessage(r)}catch(s){console.error("Error submitting form:",s),submitBtn.value="Submit",submitBtn.disabled=!1}},hubspotOnSubmit=e=>{e.preventDefault();let t=Object.fromEntries(new FormData(e.target).entries()),o=IPcountryCode||countries.find(e=>e.dial_code===t["phone-code"])?.value;t.phone=t["phone-code"]+t.phone,checkEmailValidity(t.email).then(()=>{formValidated&&(_submitHubspotForm(t,o,"8552073","2b4e05d0-d685-4929-b37c-f961d7db9de5"),submitBtn.value="Submit",submitBtn.disabled=!1,klentyFormSubmit("request-demo-api-form"))})};form?.addEventListener("submit",hubspotOnSubmit),form?.addEventListener("change",e=>{let t=document.getElementById(e.target.name+"-error");t&&(t.style.display="none"),"email"===e.target.name&&(formValidated=!0)});const handleErrorMessage=e=>{let t={BLOCKED_EMAIL:"Please enter your company/business email address.",INVALID_EMAIL:"Please enter your valid email address.",NUMBER_OUT_OF_RANGE:"Please enter a valid phone number."},o=e.errors?.[0]?.errorType;o&&t[o]&&(document.getElementById(`${"NUMBER_OUT_OF_RANGE"===o?"phone":"email"}-error`).innerText=t[o])};
