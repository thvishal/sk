let IPcountryCode="",formValidated=!0;const sanitizeInput=(e,t)=>{e.value=e.value.replace(t,"")},setDefaultSelectOption=(e,t)=>{if(e){let o=new Option(t,"");o.setAttribute("selected","true"),o.setAttribute("disabled","true"),e.options[0]=o}};document.querySelectorAll('input[type="tel"]').forEach(e=>{e.addEventListener("input",()=>sanitizeInput(e,/[^0-9]/g))});const emailElement=document.getElementById("email");async function checkEmailValidity(e){try{let t=await fetch("https://forms.hsforms.com/emailcheck/v1/json-ext?portalId=8552073&includeFreemailSuggestions=false",{method:"POST",body:e}),o=await t.json(),n=document.getElementById("email-error");o.emailFree?(n.style.display="block",n.innerText="Please enter your company/business email address.",formValidated=!1):(n.style.display="none",formValidated=!0)}catch(i){console.error("Error checking email:",i),formValidated=!1}return formValidated}localStorage.getItem("resEmail")&&emailElement&&(emailElement.value=localStorage.getItem("resEmail")),emailElement&&emailElement.addEventListener("focusout",e=>{checkEmailValidity(e.target.value)}),setDefaultSelectOption(document.getElementById("number_of_remote_hires"),"Number of hires"),setDefaultSelectOption(document.getElementById("how_can_we_help_you_new-input"),"How can we help you?"),setDefaultSelectOption(document.getElementById("company_size"),"Company size");let countries=[];const countryCodeSelect=document.getElementById("phone-code-dropdown"),setCountryCodeOptions=e=>{for(let t of(setDefaultSelectOption(countryCodeSelect,"Select Country Code"),e)){let o=`${t.label} (${t.dial_code})`;countryCodeSelect.options[countryCodeSelect.options.length]=new Option(o,t.dial_code)}countryCodeSelect.value="+1";let n=document.querySelector("#request-demo-api-form .country-loading");n&&(n.style.display="none")},fetchCountryList=async()=>{try{let e=await fetch("https://storage.googleapis.com/skuad-public-assets/country-list.json"),t=await e.json();countries=t.countryList,countryCodeSelect&&setCountryCodeOptions(countries)}catch(o){console.error("Error fetching country list:",o)}},fetchIpInfo=async()=>{try{let e=await fetch("https://api.geoapify.com/v1/ipinfo?&apiKey=c23115da6cf642e59b96f32b9d512a4c"),t=await e.json();t?.country&&(IPcountryCode=t.country.iso_code,countryCodeSelect.value="+"+t.country.phone_code)}catch(o){console.error("Error fetching IP info:",o)}};fetchCountryList(),fetchIpInfo();const _submitHubspotForm=(e,t,o,n,i)=>{let a=document.getElementById("request_demo_submit-btn");a.value="Please wait...",a.disabled=!0,delete e["phone-code"];let r={submittedAt:new Date().getTime(),fields:Object.keys(e).map((t,o)=>({objectTypeId:"0-1",name:t,value:e[t]})),context:{hutk:getCookie("hubspotutk"),pageUri:window.location.href,pageName:document.title}};fetch(`https://api.hsforms.com/submissions/v3/integration/submit/${o}/${n}`,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(r)}).then(e=>e.json()).then(o=>{a.value="Submit",a.disabled=!1,handleSubmissionResponse(o,e,t)}).catch(()=>{a.value="Submit",a.disabled=!1})},handleSubmissionResponse=(e,t,o)=>{if(e.inlineMessage)localStorage.setItem("skuadSignupFormData",JSON.stringify({...t,countryCode:o})),window.location.href="/book-a-meeting";else if("error"===e.status){let n=document.getElementById(`${e.errors[0].errorType.toLowerCase()}-error`);n&&(n.style.display="block",n.innerText=`Please enter your valid ${e.errors[0].errorType.toLowerCase().replace("_"," ")}`)}},hubspotOnSubmit=e=>{e.preventDefault();let t=Object.fromEntries(new FormData(e.target).entries()),o=IPcountryCode||countries.find(e=>e.dial_code===t["phone-code"])?.value;t.phone=t["phone-code"]+t.phone,checkEmailValidity(t.email).then(()=>{formValidated&&_submitHubspotForm(t,o,"8552073","2b4e05d0-d685-4929-b37c-f961d7db9de5")})};document.getElementById("request-demo-api-form").addEventListener("submit",hubspotOnSubmit),document.getElementById("request-demo-api-form").addEventListener("change",e=>{let t=document.getElementById(e.target.name+"-error");t&&(t.style.display="none"),"email"===e.target.name&&(formValidated=!0)});
